# pwdkeeper
Password keeper server + client

# Начало работы
Запустить сервер main.go c флагом d (по умолчанию УРЛ БД "postgres://postgres:1@localhost:5432/pwdkeeper")

# Шифрование
Сервер БД хранит только шифрованные чувствительные данные. Все нечувствительные - хранятся в нешифрованном виде.
Для нового пользователя, заходящего на сервер Клиент создает File encryption key1 (FEK), затем предлагает придумать пароль, создает на его базе и хэшсоли Key encryption key2 (KEK), затем подписывает FEK key1 при помощи ключа KEK key2 и записывает полученный шифрованный key1 в базу. При следующем входе на сервер существующего пользователя клиент запросит у пользователя пароль, загрузит key1 пользователя из БД, снова сгенерирует key2 (KEK) и если это правильный ключ, то им получится расшифровать FEK key1. После этого клиент генерирует на базе Секретной строки токен для авторизации на сервере, состоящий из логина пользователя и подписи. Сервер тоже знает эту Секретную строку, следовательно может проверить токен сгенерированный клиентом пользователю, для авторизации чтения, редактирования, удаления записей в БД. Если клиент не сможет расшифровать при помощи key2 (KEK) FEK key1, то токен не генерируется. Сервер не выдает данные без корректно подписанного логина (токена), кроме информации о конкретном логине (есть/нет в БД)
